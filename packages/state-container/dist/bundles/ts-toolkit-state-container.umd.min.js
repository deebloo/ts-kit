!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ts-toolkit/state-container",["exports","rxjs","rxjs/operators"],e):e((t["ts-toolkit"]=t["ts-toolkit"]||{},t["ts-toolkit"]["state-container"]={}),t.rxjs,t.rxjs.operators)}(this,function(t,n,r){"use strict";var e=function(){function t(t,e,i){void 0===i&&(i=new n.Subject);var s=this;this.initValue=t,this.dispatcher=i,this.stateManager=new n.BehaviorSubject(this.initValue),this.value=this.stateManager.pipe(r.distinctUntilChanged(),r.shareReplay(1)),this.dispatcher.pipe(r.scan(e,t)).subscribe(function(t){s.stateManager.next(t)})}return t.prototype.update=function(t){var e=this,i=this.stateResultToObservable(t instanceof Function?t():t).pipe(r.shareReplay(1));return i.subscribe(function(t){e.dispatcher.next(t)}),i.pipe(r.concatMap(function(){return e.value}),r.take(1))},t.prototype.stateResultToObservable=function(t){return n.isObservable(t)?t:t instanceof Promise?n.from(t):n.of(t)},t}();t.StateContainer=e,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ts-toolkit-state-container.umd.min.js.map